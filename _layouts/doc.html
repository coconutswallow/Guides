---
layout: default
---
<style>
    /* FORCE LAYOUT OVERRIDES */
    /* Make the content container a flexbox */
    .doc-content {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: flex-start; /* Crucial for sticky TOC to work */
        gap: 30px; /* Space between body and TOC */
        position: relative;
    }

    /* The Main Body: Grows to fill space */
    .doc-body {
        flex: 1 1 auto; /* Grow and shrink */
        min-width: 0;   /* Prevent flex item from overflowing container */
        max-width: 100%; 
    }

    /* The Table of Contents: Fixed narrow width */
    .doc-toc {
        flex: 0 0 200px; /* Fixed width of 200px */
        width: 200px;
        min-width: 200px;
        max-width: 200px;
        font-size: 0.85rem; 
        
        /* STICKY POSITIONING FIXES */
        position: -webkit-sticky; /* Safari support */
        position: sticky;
        top: 80px; /* Increased to clear the site header */
        max-height: calc(100vh - 100px); /* Height of viewport minus top offset */
        overflow-y: auto; /* Scroll internally if TOC is too long */
        
        /* Visual tweak to separate it slightly */
        padding-left: 10px;
        border-left: 1px solid #eee;
    }

    /* Responsive: Stack them on small screens */
    @media (max-width: 1000px) {
        .doc-content {
            flex-direction: column;
        }
        .doc-toc {
            width: 100%;
            max-width: 100%;
            flex: none;
            position: relative;
            top: 0;
            max-height: none;
            margin-top: 20px;
            border-left: none;
            padding-left: 0;
        }
    }
</style>

<div class="doc-container">
    <div class="doc-content">
        <div style="flex: 1; min-width: 0;">
            <nav class="breadcrumb">
                <a href="{{ site.baseurl }}/">Home</a>
                {% assign url_parts = page.url | split: '/' %}
                {% assign current_path = '' %}
                {% for part in url_parts %}
                    {% unless forloop.first or forloop.last %}
                        {% assign current_path = current_path | append: '/' | append: part %}
                        <span class="breadcrumb-separator">›</span>
                        <span class="breadcrumb-item">{{ part | replace: '-', ' ' | capitalize }}</span>
                    {% endunless %}
                {% endfor %}
            </nav>

            <h1 class="doc-title">{{ page.title }}</h1>

            {% if page.author or page.date %}
            <div class="doc-meta">
                {% if page.author %}<span class="doc-author">By {{ page.author }}</span>{% endif %}
                {% if page.date %}<span class="doc-date">{{ page.date | date: "%B %d, %Y" }}</span>{% endif %}
            </div>
            {% endif %}

            <div class="doc-body">
                {{ content }}
            </div>

             {% if page.collection %}
            <nav class="doc-footer-nav">
                {% assign collection_items = site[page.collection] | sort: 'order' %}
                {% assign current_index_0 = -1 %}

                {% for item in collection_items %}
                    {% if item.url == page.url %}
                        {% assign current_index_0 = forloop.index0 %}
                        {% break %}
                    {% endif %}
                {% endfor %}
                
                {% comment %} Previous Link Logic {% endcomment %}
                {% if current_index_0 > 0 %} 
                    {% assign prev_item_index = current_index_0 | minus: 1 %}
                    {% assign prev_item = collection_items[prev_item_index] %}
                    <a href="{{ prev_item.url | relative_url }}" class="prev-link">
                        <span class="nav-arrow">‹</span>
                        <span class="nav-label">{{ prev_item.title }}</span>
                    </a>
                {% endif %}
                
                {% comment %} Next Link Logic {% endcomment %}
                {% assign next_item_index = current_index_0 | plus: 1 %}
                {% if next_item_index < collection_items.size %}
                    {% assign next_item = collection_items[next_item_index] %}  
                    <a href="{{ next_item.url | relative_url }}" class="next-link">
                        <span class="nav-label">{{ next_item.title }}</span>
                        <span class="nav-arrow">›</span>
                    </a>
                {% endif %}
            </nav>
            {% endif %}
        </div>

        {% if page.toc %}
        <aside class="doc-toc">
            <h3>Page Contents</h3>
            <div id="toc-container"></div>
        </aside>
        {% endif %}
    </div>
</div>

{% if page.toc %}
<script>
// Generate table of contents from h2 and h3 headers
document.addEventListener('DOMContentLoaded', function() {
    const content = document.querySelector('.doc-body');
    const tocContainer = document.getElementById('toc-container');
    
    if (!content || !tocContainer) return;
    
    const headers = content.querySelectorAll('h2, h3');
    if (headers.length === 0) return;
    
    const toc = document.createElement('ul');
    toc.className = 'toc-list';
    
    headers.forEach((header, index) => {
        // Add ID to header if it doesn't have one
        if (!header.id) {
            header.id = 'heading-' + index;
        }
        
        const li = document.createElement('li');
        li.className = 'toc-item toc-' + header.tagName.toLowerCase();
        
        const link = document.createElement('a');
        link.href = '#' + header.id;
        link.textContent = header.textContent;
        link.className = 'toc-link';
        
        li.appendChild(link);
        toc.appendChild(li);
    });
    
    tocContainer.appendChild(toc);
});
</script>
{% endif %}